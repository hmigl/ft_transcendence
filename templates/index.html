{% load static %}
{% load bootstrap5 %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transcendence Pong Game</title>
    <link rel="icon" href="{% static 'favicon.ico' %}">

    <!-- Bootstrap CSS -->
    {% bootstrap_css %}

    <!-- Estilo personalizado -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    
    <div id="app">
        <!-- Conteúdo dinâmico será injetado aqui -->
    </div>

    <!-- Bootstrap JavaScript e dependências -->
    {% bootstrap_javascript %}

    <script>
    // Função para mostrar Hello World
    function showHelloWorld() {
        document.getElementById('app').innerHTML = '<h1>Hello World!</h1>';
    }

    // Função para inicializar e carregar o Pong
    function loadPong() {
        document.getElementById('app').innerHTML = `
            <canvas id="canvas" width="800" height="500"></canvas>
        `;
        loadPongScript();
    }

    // Função para carregar o script Pong dinamicamente
    function loadPongScript() {
        const script = document.createElement('script');
        script.src = '{% static "js/pong.js" %}';
        script.onload = initPong; // Certifique-se de que initPong é uma função definida no pong.js para iniciar o jogo
        document.head.appendChild(script);
    }

    // Escutando por mudanças na URL
    window.addEventListener('popstate', handleRouteChange);

    // Tratando a rota inicial ao carregar a página
    handleRouteChange();

    function handleRouteChange() {
        const path = window.location.pathname;
        if (path === '/pong') {
            loadPong();
        } else {
            showHelloWorld();
        }
    }    
    </script>

</body>
</html>
